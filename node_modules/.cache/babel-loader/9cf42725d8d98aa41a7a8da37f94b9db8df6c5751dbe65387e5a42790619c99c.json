{"ast":null,"code":"var _jsxFileName = \"/Users/hawreakbari/Desktop/unisat-web3-demo/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"./App.css\";\nimport { Button, Card, Radio } from \"antd\";\nimport { CHAINS_MAP, ChainType } from \"./const\";\nimport { copyToClipboard, satoshisToAmount } from \"./utils\";\nimport { SendBitcoinCard } from \"./components/SendBitcoinCard\";\nimport { PushPsbtCard } from \"./components/PushPsbtCard\";\nimport { PushTxCard } from \"./components/PushTxCard\";\nimport { SignMessageCard } from \"./components/SignMessageCard\";\nimport { SignPsbtCard } from \"./components/SignPsbtCard\";\nimport { Collapse } from \"antd\";\nimport { InscribeTransferCard } from \"./components/InscribeTransferCard\";\nimport { SendInscriptionCard } from \"./components/SendInscriptionCard\";\nimport { SendRunesCard } from \"./components/SendRunesCard\";\nimport useMessage from \"antd/es/message/useMessage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [unisatInstalled, setUnisatInstalled] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [accounts, setAccounts] = useState([]);\n  const [publicKey, setPublicKey] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [balance, setBalance] = useState({\n    confirmed: 0,\n    unconfirmed: 0,\n    total: 0\n  });\n  const [network, setNetwork] = useState(\"livenet\");\n  const [version, setVersion] = useState(\"\");\n  const [chainType, setChainType] = useState(ChainType.BITCOIN_MAINNET);\n  const chain = CHAINS_MAP[chainType];\n  const getBasicInfo = async () => {\n    const unisat = window.unisat;\n    try {\n      const accounts = await unisat.getAccounts();\n      setAccounts(accounts);\n    } catch (e) {\n      console.log(\"getAccounts error\", e);\n    }\n    try {\n      const publicKey = await unisat.getPublicKey();\n      setPublicKey(publicKey);\n    } catch (e) {\n      console.log(\"getPublicKey error\", e);\n    }\n    try {\n      const balance = await unisat.getBalance();\n      setBalance(balance);\n    } catch (e) {\n      console.log(\"getBalance error\", e);\n    }\n    try {\n      const chain = await unisat.getChain();\n      setChainType(chain.enum);\n    } catch (e) {\n      console.log(\"getChain error\", e);\n    }\n    try {\n      const network = await unisat.getNetwork();\n      setNetwork(network);\n    } catch (e) {\n      console.log(\"getNetwork error\", e);\n    }\n    try {\n      const version = await unisat.getVersion();\n      setVersion(version);\n    } catch (e) {\n      console.log(\"getVersion error \", e);\n    }\n    if (unisat.getChain !== undefined) {\n      try {\n        const chain = await unisat.getChain();\n        setChainType(chain.enum);\n      } catch (e) {\n        console.log(\"getChain error\", e);\n      }\n    }\n  };\n  const selfRef = useRef({\n    accounts: []\n  });\n  const self = selfRef.current;\n  const handleAccountsChanged = _accounts => {\n    console.log(\"accounts changed\", _accounts);\n    if (self.accounts[0] === _accounts[0]) {\n      // prevent from triggering twice\n      return;\n    }\n    self.accounts = _accounts;\n    if (_accounts.length > 0) {\n      setAccounts(_accounts);\n      setConnected(true);\n      setAddress(_accounts[0]);\n      getBasicInfo();\n    } else {\n      setConnected(false);\n    }\n  };\n  const handleNetworkChanged = network => {\n    console.log(\"network changed\", network);\n    setNetwork(network);\n    getBasicInfo();\n  };\n  const handleChainChanged = chain => {\n    console.log(\"chain changed\", chain);\n    setChainType(chain.enum);\n    getBasicInfo();\n  };\n  useEffect(() => {\n    async function checkUnisat() {\n      let unisat = window.unisat;\n      for (let i = 1; i < 10 && !unisat; i += 1) {\n        await new Promise(resolve => setTimeout(resolve, 100 * i));\n        unisat = window.unisat;\n      }\n      if (unisat) {\n        setUnisatInstalled(true);\n      } else if (!unisat) return;\n      unisat.getAccounts().then(accounts => {\n        // 主动获取一次账户信息\n        handleAccountsChanged(accounts);\n      }).catch(e => {\n        messageApi.error(e.message);\n      });\n      unisat.on(\"accountsChanged\", handleAccountsChanged);\n      unisat.on(\"networkChanged\", handleNetworkChanged);\n      unisat.on(\"chainChanged\", handleChainChanged);\n      return () => {\n        unisat.removeListener(\"accountsChanged\", handleAccountsChanged);\n        unisat.removeListener(\"networkChanged\", handleNetworkChanged);\n        unisat.removeListener(\"chainChanged\", handleChainChanged);\n      };\n    }\n    checkUnisat().then();\n  }, []);\n  const [messageApi, contextHolder] = useMessage();\n  if (!unisatInstalled) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: [contextHolder, /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => {\n              window.location.href = \"https://unisat.io\";\n            },\n            children: \"Install Unisat Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this);\n  }\n  const unisat = window.unisat;\n  const items = [{\n    key: \"sendBitcoin\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.sendBitcoin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(SendBitcoinCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"sendInscription\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.sendInscription\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(SendInscriptionCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"sendRunes\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.sendRunes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(SendRunesCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"inscribeTransfer\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.inscribeTransfer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(InscribeTransferCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"signMessage\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.signMessage\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(SignMessageCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"signPsbt\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.signPsbt\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(SignPsbtCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"pushPsbt\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.signPsbt\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(PushPsbtCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 17\n    }, this)\n  }, {\n    key: \"pushTx\",\n    label: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"start\"\n      },\n      children: \"unisat.pushTx\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 14\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(PushTxCard, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }, this)\n  }];\n  const chains = Object.keys(CHAINS_MAP).map(key => {\n    const chain = CHAINS_MAP[key];\n    return {\n      label: chain.label,\n      value: chain.enum\n    };\n  });\n  const supportLegacyNetworks = [\"livenet\", \"testnet\"];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          width: \"90%\",\n          alignSelf: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            minWidth: 200\n          },\n          children: \" \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Unisat Wallet Demo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            minWidth: 200\n          },\n          children: connected ? /*#__PURE__*/_jsxDEV(Button, {\n            onClick: async () => {\n              await unisat.disconnect();\n            },\n            children: \"disconnect\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this) : null\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), contextHolder, connected ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          padding: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flex: 1,\n            flexDirection: \"row\",\n            width: \"90%\",\n            padding: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(Card, {\n            size: \"small\",\n            title: \"Wallet Info\",\n            style: {\n              width: \"100%\",\n              marginRight: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"left\",\n                marginTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: \"Version:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  wordWrap: \"break-word\"\n                },\n                children: version\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this), chain ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"left\",\n                marginTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: \"Chain:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Radio.Group, {\n                onChange: async e => {\n                  try {\n                    const chain = await unisat.switchChain(e.target.value);\n                    setChainType(chain.enum);\n                  } catch (e) {\n                    messageApi.error(e.message);\n                  }\n                },\n                value: chain.enum,\n                children: chains.map(chain => /*#__PURE__*/_jsxDEV(Radio, {\n                  value: chain.value,\n                  children: chain.label\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 19\n            }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"left\",\n                marginTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: \"Network:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this), supportLegacyNetworks.includes(network) ? /*#__PURE__*/_jsxDEV(Radio.Group, {\n                onChange: async e => {\n                  try {\n                    const network = await unisat.switchNetwork(e.target.value);\n                    setNetwork(network);\n                  } catch (e) {\n                    messageApi.error(e.message);\n                  }\n                },\n                value: network,\n                children: [/*#__PURE__*/_jsxDEV(Radio, {\n                  value: \"livenet\",\n                  children: \"livenet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Radio, {\n                  value: \"testnet\",\n                  children: \"testnet\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"\\\"unisat.getNetwork\\\" is legacy. Please use \\\"unisat.getChain\\\" instead.\", \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card, {\n            size: \"small\",\n            title: \"Account Info\",\n            style: {\n              width: \"100%\",\n              marginLeft: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"left\",\n                marginTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: \"Address:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  wordWrap: \"break-word\"\n                },\n                onClick: () => {\n                  copyToClipboard(address);\n                  messageApi.success(\"Address Copied.\");\n                },\n                children: address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 361,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"left\",\n                marginTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: \"PublicKey:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  wordWrap: \"break-word\"\n                },\n                onClick: () => {\n                  copyToClipboard(publicKey);\n                  messageApi.success(\"PublicKey Copied.\");\n                },\n                children: publicKey\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"left\",\n                marginTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: \"bold\"\n                },\n                children: \"Balance: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  wordWrap: \"break-word\"\n                },\n                children: [satoshisToAmount(balance.total), \" \", chain && chain.unit]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n          style: {\n            backgroundColor: \"rgba(255,255,255,0.7)\",\n            width: \"90%\"\n          },\n          items: items,\n          defaultActiveKey: [],\n          onChange: () => {\n            // todo\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: async () => {\n            try {\n              const result = await unisat.requestAccounts();\n              handleAccountsChanged(result);\n            } catch (e) {\n              messageApi.error(e.message);\n            }\n          },\n          children: \"Connect Unisat Wallet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"QKyZFtvCupOBG60HA8CQ8iGqyBc=\", false, function () {\n  return [useMessage];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Button","Card","Radio","CHAINS_MAP","ChainType","copyToClipboard","satoshisToAmount","SendBitcoinCard","PushPsbtCard","PushTxCard","SignMessageCard","SignPsbtCard","Collapse","InscribeTransferCard","SendInscriptionCard","SendRunesCard","useMessage","jsxDEV","_jsxDEV","App","_s","unisatInstalled","setUnisatInstalled","connected","setConnected","accounts","setAccounts","publicKey","setPublicKey","address","setAddress","balance","setBalance","confirmed","unconfirmed","total","network","setNetwork","version","setVersion","chainType","setChainType","BITCOIN_MAINNET","chain","getBasicInfo","unisat","window","getAccounts","e","console","log","getPublicKey","getBalance","getChain","enum","getNetwork","getVersion","undefined","selfRef","self","current","handleAccountsChanged","_accounts","length","handleNetworkChanged","handleChainChanged","checkUnisat","i","Promise","resolve","setTimeout","then","catch","messageApi","error","message","on","removeListener","contextHolder","className","children","onClick","location","href","fileName","_jsxFileName","lineNumber","columnNumber","items","key","label","style","textAlign","chains","Object","keys","map","value","supportLegacyNetworks","display","flexDirection","alignItems","justifyContent","width","alignSelf","minWidth","disconnect","padding","flex","size","title","marginRight","marginTop","fontWeight","wordWrap","Group","onChange","switchChain","target","includes","switchNetwork","marginLeft","success","unit","backgroundColor","defaultActiveKey","result","requestAccounts","_c","$RefreshReg$"],"sources":["/Users/hawreakbari/Desktop/unisat-web3-demo/src/App.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./App.css\";\nimport { Button, Card, CollapseProps, Input, Radio, message } from \"antd\";\nimport { CHAINS_MAP, ChainType } from \"./const\";\nimport { copyToClipboard, satoshisToAmount } from \"./utils\";\nimport { SendBitcoinCard } from \"./components/SendBitcoinCard\";\nimport { PushPsbtCard } from \"./components/PushPsbtCard\";\nimport { PushTxCard } from \"./components/PushTxCard\";\nimport { SignMessageCard } from \"./components/SignMessageCard\";\nimport { SignPsbtCard } from \"./components/SignPsbtCard\";\nimport { Collapse } from \"antd\";\nimport { InscribeTransferCard } from \"./components/InscribeTransferCard\";\nimport { SendInscriptionCard } from \"./components/SendInscriptionCard\";\nimport { SendRunesCard } from \"./components/SendRunesCard\";\nimport useMessage from \"antd/es/message/useMessage\";\n\nfunction App() {\n  const [unisatInstalled, setUnisatInstalled] = useState(false);\n  const [connected, setConnected] = useState(false);\n  const [accounts, setAccounts] = useState<string[]>([]);\n  const [publicKey, setPublicKey] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [balance, setBalance] = useState({\n    confirmed: 0,\n    unconfirmed: 0,\n    total: 0,\n  });\n  const [network, setNetwork] = useState(\"livenet\");\n\n  const [version, setVersion] = useState(\"\");\n\n  const [chainType, setChainType] = useState<ChainType>(\n    ChainType.BITCOIN_MAINNET\n  );\n\n  const chain = CHAINS_MAP[chainType];\n\n  const getBasicInfo = async () => {\n    const unisat = (window as any).unisat;\n\n    try {\n      const accounts = await unisat.getAccounts();\n      setAccounts(accounts);\n    } catch (e) {\n      console.log(\"getAccounts error\", e);\n    }\n\n    try {\n      const publicKey = await unisat.getPublicKey();\n      setPublicKey(publicKey);\n    } catch (e) {\n      console.log(\"getPublicKey error\", e);\n    }\n\n    try {\n      const balance = await unisat.getBalance();\n      setBalance(balance);\n    } catch (e) {\n      console.log(\"getBalance error\", e);\n    }\n\n    try {\n      const chain = await unisat.getChain();\n      setChainType(chain.enum);\n    } catch (e) {\n      console.log(\"getChain error\", e);\n    }\n\n    try {\n      const network = await unisat.getNetwork();\n      setNetwork(network);\n    } catch (e) {\n      console.log(\"getNetwork error\", e);\n    }\n\n    try {\n      const version = await unisat.getVersion();\n      setVersion(version);\n    } catch (e) {\n      console.log(\"getVersion error \", e);\n    }\n\n    if (unisat.getChain !== undefined) {\n      try {\n        const chain = await unisat.getChain();\n        setChainType(chain.enum);\n      } catch (e) {\n        console.log(\"getChain error\", e);\n      }\n    }\n  };\n\n  const selfRef = useRef<{ accounts: string[] }>({\n    accounts: [],\n  });\n  const self = selfRef.current;\n  const handleAccountsChanged = (_accounts: string[]) => {\n    console.log(\"accounts changed\", _accounts);\n    if (self.accounts[0] === _accounts[0]) {\n      // prevent from triggering twice\n      return;\n    }\n    self.accounts = _accounts;\n    if (_accounts.length > 0) {\n      setAccounts(_accounts);\n      setConnected(true);\n\n      setAddress(_accounts[0]);\n\n      getBasicInfo();\n    } else {\n      setConnected(false);\n    }\n  };\n\n  const handleNetworkChanged = (network: string) => {\n    console.log(\"network changed\", network);\n    setNetwork(network);\n    getBasicInfo();\n  };\n\n  const handleChainChanged = (chain: {\n    enum: ChainType;\n    name: string;\n    network: string;\n  }) => {\n    console.log(\"chain changed\", chain);\n    setChainType(chain.enum);\n    getBasicInfo();\n  };\n\n  useEffect(() => {\n    async function checkUnisat() {\n      let unisat = (window as any).unisat;\n\n      for (let i = 1; i < 10 && !unisat; i += 1) {\n        await new Promise((resolve) => setTimeout(resolve, 100 * i));\n        unisat = (window as any).unisat;\n      }\n\n      if (unisat) {\n        setUnisatInstalled(true);\n      } else if (!unisat) return;\n\n      unisat\n        .getAccounts()\n        .then((accounts: string[]) => {\n          // 主动获取一次账户信息\n          handleAccountsChanged(accounts);\n        })\n        .catch((e: any) => {\n          messageApi.error((e as any).message);\n        });\n\n      unisat.on(\"accountsChanged\", handleAccountsChanged);\n      unisat.on(\"networkChanged\", handleNetworkChanged);\n      unisat.on(\"chainChanged\", handleChainChanged);\n\n      return () => {\n        unisat.removeListener(\"accountsChanged\", handleAccountsChanged);\n        unisat.removeListener(\"networkChanged\", handleNetworkChanged);\n        unisat.removeListener(\"chainChanged\", handleChainChanged);\n      };\n    }\n\n    checkUnisat().then();\n  }, []);\n\n  const [messageApi, contextHolder] = useMessage();\n\n  if (!unisatInstalled) {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          {contextHolder}\n          <div>\n            <Button\n              onClick={() => {\n                window.location.href = \"https://unisat.io\";\n              }}\n            >\n              Install Unisat Wallet\n            </Button>\n          </div>\n        </header>\n      </div>\n    );\n  }\n\n  const unisat = (window as any).unisat;\n\n  const items: CollapseProps[\"items\"] = [\n    {\n      key: \"sendBitcoin\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.sendBitcoin</div>,\n      children: <SendBitcoinCard />,\n    },\n    {\n      key: \"sendInscription\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.sendInscription</div>,\n      children: <SendInscriptionCard />,\n    },\n\n    {\n      key: \"sendRunes\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.sendRunes</div>,\n      children: <SendRunesCard />,\n    },\n    {\n      key: \"inscribeTransfer\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.inscribeTransfer</div>,\n      children: <InscribeTransferCard />,\n    },\n    {\n      key: \"signMessage\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.signMessage</div>,\n      children: <SignMessageCard />,\n    },\n    {\n      key: \"signPsbt\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.signPsbt</div>,\n      children: <SignPsbtCard />,\n    },\n    {\n      key: \"pushPsbt\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.signPsbt</div>,\n      children: <PushPsbtCard />,\n    },\n    {\n      key: \"pushTx\",\n      label: <div style={{ textAlign: \"start\" }}>unisat.pushTx</div>,\n      children: <PushTxCard />,\n    },\n  ];\n\n  const chains = Object.keys(CHAINS_MAP).map((key) => {\n    const chain = CHAINS_MAP[key as ChainType];\n    return {\n      label: chain.label,\n      value: chain.enum,\n    };\n  });\n\n  const supportLegacyNetworks = [\"livenet\", \"testnet\"];\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            width: \"90%\",\n            alignSelf: \"center\",\n          }}\n        >\n          <div style={{ minWidth: 200 }}> </div>\n          <p>Unisat Wallet Demo</p>\n          <div style={{ minWidth: 200 }}>\n            {connected ? (\n              <Button\n                onClick={async () => {\n                  await unisat.disconnect();\n                }}\n              >\n                disconnect\n              </Button>\n            ) : null}\n          </div>\n        </div>\n\n        {contextHolder}\n        {connected ? (\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\",\n              padding: 10,\n            }}\n          >\n            <div\n              style={{\n                display: \"flex\",\n                flex: 1,\n                flexDirection: \"row\",\n                width: \"90%\",\n                padding: 10,\n              }}\n            >\n              <Card\n                size=\"small\"\n                title=\"Wallet Info\"\n                style={{ width: \"100%\", marginRight: 5 }}\n              >\n                <div style={{ textAlign: \"left\", marginTop: 10 }}>\n                  <div style={{ fontWeight: \"bold\" }}>Version:</div>\n                  <div style={{ wordWrap: \"break-word\" }}>{version}</div>\n                </div>\n\n                {chain ? (\n                  <div style={{ textAlign: \"left\", marginTop: 10 }}>\n                    <div style={{ fontWeight: \"bold\" }}>Chain:</div>\n                    <Radio.Group\n                      onChange={async (e) => {\n                        try {\n                          const chain = await unisat.switchChain(\n                            e.target.value\n                          );\n                          setChainType(chain.enum);\n                        } catch (e) {\n                          messageApi.error((e as any).message);\n                        }\n                      }}\n                      value={chain.enum}\n                    >\n                      {chains.map((chain) => (\n                        <Radio value={chain.value}>{chain.label}</Radio>\n                      ))}\n                    </Radio.Group>\n                  </div>\n                ) : null}\n\n                <div style={{ textAlign: \"left\", marginTop: 10 }}>\n                  <div style={{ fontWeight: \"bold\" }}>Network:</div>\n                  {supportLegacyNetworks.includes(network) ? (\n                    <Radio.Group\n                      onChange={async (e) => {\n                        try {\n                          const network = await unisat.switchNetwork(\n                            e.target.value\n                          );\n                          setNetwork(network);\n                        } catch (e) {\n                          messageApi.error((e as any).message);\n                        }\n                      }}\n                      value={network}\n                    >\n                      <Radio value={\"livenet\"}>livenet</Radio>\n                      <Radio value={\"testnet\"}>testnet</Radio>\n                    </Radio.Group>\n                  ) : (\n                    <div>\n                      <p>\n                        \"unisat.getNetwork\" is legacy. Please use\n                        \"unisat.getChain\" instead.{\" \"}\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </Card>\n              <Card\n                size=\"small\"\n                title=\"Account Info\"\n                style={{ width: \"100%\", marginLeft: 5 }}\n              >\n                <div style={{ textAlign: \"left\", marginTop: 10 }}>\n                  <div style={{ fontWeight: \"bold\" }}>Address:</div>\n                  <div\n                    style={{ wordWrap: \"break-word\" }}\n                    onClick={() => {\n                      copyToClipboard(address);\n                      messageApi.success(\"Address Copied.\");\n                    }}\n                  >\n                    {address}\n                  </div>\n                </div>\n\n                <div style={{ textAlign: \"left\", marginTop: 10 }}>\n                  <div style={{ fontWeight: \"bold\" }}>PublicKey:</div>\n                  <div\n                    style={{ wordWrap: \"break-word\" }}\n                    onClick={() => {\n                      copyToClipboard(publicKey);\n                      messageApi.success(\"PublicKey Copied.\");\n                    }}\n                  >\n                    {publicKey}\n                  </div>\n                </div>\n\n                <div style={{ textAlign: \"left\", marginTop: 10 }}>\n                  <div style={{ fontWeight: \"bold\" }}>Balance: </div>\n                  <div style={{ wordWrap: \"break-word\" }}>\n                    {satoshisToAmount(balance.total)} {chain && chain.unit}\n                  </div>\n                </div>\n              </Card>\n            </div>\n\n            <Collapse\n              style={{\n                backgroundColor: \"rgba(255,255,255,0.7)\",\n                width: \"90%\",\n              }}\n              items={items}\n              defaultActiveKey={[]}\n              onChange={() => {\n                // todo\n              }}\n            />\n          </div>\n        ) : (\n          <div>\n            <Button\n              onClick={async () => {\n                try {\n                  const result = await unisat.requestAccounts();\n                  handleAccountsChanged(result);\n                } catch (e) {\n                  messageApi.error((e as any).message);\n                }\n              }}\n            >\n              Connect Unisat Wallet\n            </Button>\n          </div>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}